// This file was auto-generated by x10. Do not modify by hand.
// @flow


import { v4 as uuid } from 'uuid';

import { addError, type FormError } from 'react_lib/form/FormProvider';
import isBlank from 'react_lib/utils/isBlank';

import { type Attachment } from 'dps/entities/Attachment';
import { type MatchInfo } from 'dps/entities/MatchInfo';
import { type Message } from 'dps/entities/Message';
import { type OldHit } from 'dps/entities/OldHit';
import { type Shipment } from 'dps/entities/Shipment';
import { type SuggestedResource } from 'dps/entities/SuggestedResource';


// Type Definition
export type Hit = {
  +id: string,
  +priority: ?PriorityEnum,
  +status: ?HitStatusEnum,
  +reasonForClearance: ?ReasonForCleranceEnum,
  +notes: string,
  +whitelistTime: ?number,
  +companyEntity: ?{ id: string },
  +user: ?{ id: string },
  +attachments: $ReadOnlyArray<Attachment>,
  +matches: $ReadOnlyArray<MatchInfo>,
  +resources: $ReadOnlyArray<SuggestedResource>,
  +shipments: $ReadOnlyArray<Shipment>,
  +messages: $ReadOnlyArray<Message>,
  +oldHits: $ReadOnlyArray<OldHit>,
};


// Enums
export const PriorityEnumPairs = [
  {
    value: 'LOW',
    label: 'Low',
  },
  {
    value: 'MIDDLE',
    label: 'Middle',
  },
  {
    value: 'HIGH',
    label: 'High',
  },
];

export type PriorityEnum = 'LOW' | 'MIDDLE' | 'HIGH';

export const HitStatusEnumPairs = [
  {
    value: 'UNRESOLVED',
    label: 'Unresolved',
  },
  {
    value: 'CLEARED',
    label: 'Cleared',
  },
  {
    value: 'DENIED',
    label: 'Denied',
  },
];

export type HitStatusEnum = 'UNRESOLVED' | 'CLEARED' | 'DENIED';

export const ReasonForCleranceEnumPairs = [
  {
    value: 'PERSON_NOT_ENTITY',
    label: 'Person is not an Entity/Business',
  },
  {
    value: 'PARTIAL_NAME',
    label: 'Partial Name Match - No Country/Address Match',
  },
  {
    value: 'PARTIAL_ADDRESS',
    label: 'Partial Address Match - No Name Match',
  },
  {
    value: 'OTHER',
    label: 'Other',
  },
];

export type ReasonForCleranceEnum = 'PERSON_NOT_ENTITY' | 'PARTIAL_NAME' | 'PARTIAL_ADDRESS' | 'OTHER';



// Create Default Function
export function createDefaultHit(): Hit {
  return {
    id: uuid(),
    priority: null,
    status: 'UNRESOLVED',
    // $FlowExpectedError Required field, but no default value
    reasonForClearance: null,
    notes: '',
    // $FlowExpectedError Required field, but no default value
    whitelistTime: null,
    companyEntity: null,
    user: null,
    attachments: [],
    matches: [],
    resources: [],
    shipments: [],
    messages: [],
    oldHits: [],
  };
}


// Validations
export function hitCalculateErrors(hit: Hit, prefix?: string): $ReadOnlyArray<FormError> {
  const errors = [];
  if (hit == null ) return errors;

  if (isBlank(hit.reasonForClearance))
    addError(errors, prefix, 'Reason For Clearance is required', ['reasonForClearance']);
  if (isBlank(hit.notes))
    addError(errors, prefix, 'Notes is required', ['notes']);
  if (isBlank(hit.whitelistTime))
    addError(errors, prefix, 'Whitelist Time is required', ['whitelistTime']);
  if (isBlank(hit.companyEntity))
    addError(errors, prefix, 'Company Entity is required', ['companyEntity']);

  return errors;
}

