// This file was auto-generated by x10. Do not modify by hand.
// @flow


import { v4 as uuid } from 'uuid';

import { addError, type FormError } from 'react_lib/form/FormProvider';
import isBlank from 'react_lib/utils/isBlank';

import { addressCalculateErrors, createDefaultAddress, type Address } from 'client_page/entities/Address';
import { type Country } from 'client_page/entities/Country';
import { createDefaultCtpatReview, ctpatReviewCalculateErrors, type CtpatReview } from 'client_page/entities/CtpatReview';
import { type Currency } from 'client_page/entities/Currency';
import { type Document } from 'client_page/entities/Document';
import { type HkspPartnerUse } from 'client_page/entities/HkspPartnerUse';
import { type NetsuiteVendor } from 'client_page/entities/NetsuiteVendor';
import { type VatNumber } from 'client_page/entities/VatNumber';


// Type Definition
export type CompanyEntity = {
  +id: string,
  +legalName: string,
  +doingBusinessAs: string,
  +coreId: ?number,
  +adminEmail: string,
  +companyType: ?CompanyEntityTypeEnum,
  +stateOfBusinessRegistration: string,
  +usTaxId: string,
  +isPrimary: boolean,
  +dgDisclaimerAgreed: boolean,
  +mailingAddressIsPhysicalAddress: boolean,
  +brBlCompanyName: string,
  +isArchived: boolean,
  +brBlRegistrationNumber: string,
  +brBlAddress: string,
  +brBlLegalRepChinese: string,
  +brBlLegalRepPinyin: string,
  +usFccNumber: string,
  +eoriNumber: string,
  +usciNumber: string,
  +agentIataCode: string,
  +hkRaNumber: string,
  +hkspFlexport: ?HkspFlexportEnum,
  +hkspKnownConsignorNumber: string,
  +hkspStatusExpirationDate: ?string,
  +hkspKcResponsiblePerson: string,
  +vendorCategory: ?VendorCategoryEnum,
  +mailingAddress: Address,
  +physicalAddress: Address,
  +vatNumbers: $ReadOnlyArray<VatNumber>,
  +netsuiteVendorId: ?NetsuiteVendor,
  +ctpatReview: CtpatReview,
  +documents: $ReadOnlyArray<Document>,
  +countryOfBusinessRegistration: ?Country,
  +invoiceCurrencyDefault: ?Currency,
  +hkspPartners: $ReadOnlyArray<HkspPartnerUse>,
};


// Enums
export const CompanyEntityTypeEnumPairs = [
  {
    value: 'corporation',
    label: 'Corporation',
  },
  {
    value: 'individual',
    label: 'Individual',
  },
  {
    value: 'limited_liability_company',
    label: 'Limited Liability Company',
  },
  {
    value: 'limited_liability_partnership',
    label: 'Limited Liability Partnership',
  },
  {
    value: 'non_resident_corporation',
    label: 'Non Resident Corporation',
  },
  {
    value: 'partnership',
    label: 'Partnership',
  },
  {
    value: 'sole_proprietorship',
    label: 'Sole Proprietorship',
  },
  {
    value: 'unknown',
    label: 'Unknown',
  },
  {
    value: 'unlimited_liability_corporation',
    label: 'Unlimited Liability Corporation',
  },
];

export type CompanyEntityTypeEnum = 'corporation' | 'individual' | 'limited_liability_company' | 'limited_liability_partnership' | 'non_resident_corporation' | 'partnership' | 'sole_proprietorship' | 'unknown' | 'unlimited_liability_corporation';

export const VendorCategoryEnumPairs = [
  {
    value: 'unassigned',
    label: 'Unassigned',
  },
  {
    value: 'freight_unapproved',
    label: 'Freight - Unapproved',
  },
  {
    value: 'freight_approved',
    label: 'Freight - Approved',
  },
  {
    value: 'arrival_notice',
    label: 'Arrival Notice',
  },
  {
    value: 'arrival_notice_terms',
    label: 'Arrival Notice Terms',
  },
  {
    value: 'passthrough_approved',
    label: 'Passthrough Approved',
  },
];

export type VendorCategoryEnum = 'unassigned' | 'freight_unapproved' | 'freight_approved' | 'arrival_notice' | 'arrival_notice_terms' | 'passthrough_approved';

export const HkspFlexportEnumPairs = [
  {
    value: 'known_consignor',
    label: 'Known Consignor',
  },
  {
    value: 'acccount_consignor',
    label: 'Acccount Consignor',
  },
  {
    value: 'unknown',
    label: 'Unknown',
  },
];

export type HkspFlexportEnum = 'known_consignor' | 'acccount_consignor' | 'unknown';



// Derived Attribute Functions
export function companyEntityApplicableWhenForPhysicalAddress(companyEntity: ?{
  +mailingAddressIsPhysicalAddress: boolean,
}): boolean {
  if (companyEntity == null) return false;
  const result = !companyEntity?.mailingAddressIsPhysicalAddress;
  return result;
}



// Create Default Function
export function createDefaultCompanyEntity(): CompanyEntity {
  return {
    id: uuid(),
    legalName: '',
    doingBusinessAs: '',
    coreId: null,
    adminEmail: '',
    // $FlowExpectedError Required field, but no default value
    companyType: null,
    stateOfBusinessRegistration: '',
    usTaxId: '',
    isPrimary: false,
    dgDisclaimerAgreed: false,
    mailingAddressIsPhysicalAddress: true,
    brBlCompanyName: '',
    isArchived: false,
    brBlRegistrationNumber: '',
    brBlAddress: '',
    brBlLegalRepChinese: '',
    brBlLegalRepPinyin: '',
    usFccNumber: '',
    eoriNumber: '',
    usciNumber: '',
    agentIataCode: '',
    hkRaNumber: '',
    hkspFlexport: null,
    hkspKnownConsignorNumber: '',
    hkspStatusExpirationDate: null,
    hkspKcResponsiblePerson: '',
    vendorCategory: null,
    mailingAddress: createDefaultAddress(),
    physicalAddress: createDefaultAddress(),
    vatNumbers: [],
    netsuiteVendorId: null,
    ctpatReview: createDefaultCtpatReview(),
    documents: [],
    countryOfBusinessRegistration: null,
    invoiceCurrencyDefault: null,
    hkspPartners: [],
  };
}


// Validations
export function companyEntityCalculateErrors(companyEntity: CompanyEntity, prefix?: string): $ReadOnlyArray<FormError> {
  const errors = [];
  if (companyEntity == null ) return errors;

  if (isBlank(companyEntity.legalName))
    addError(errors, prefix, 'Legal Name is required', ['legalName']);
  if (isBlank(companyEntity.companyType))
    addError(errors, prefix, 'Company Type is required', ['companyType']);

  errors.push(...addressCalculateErrors(companyEntity.mailingAddress, 'mailingAddress'));
  if (companyEntityApplicableWhenForPhysicalAddress(companyEntity))
    errors.push(...addressCalculateErrors(companyEntity.physicalAddress, 'physicalAddress'));
  errors.push(...ctpatReviewCalculateErrors(companyEntity.ctpatReview, 'ctpatReview'));

  return errors;
}

