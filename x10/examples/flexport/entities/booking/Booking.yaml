name: Booking
description: A pre-<Shipment>. An intention to ship goods containing most of the information necessary to eventually generate a <Shipment>

attributes:
  - name: name
    dataType: String
    mandatory: true
    placeholderText: Description of shipment

  - name: state
    dataType: BookingState
    mandatory: true

  - name: transportationMode
    dataType: TransportationMode
    mandatory: true

  - name: cargoReadyDate
    dataType: Date
    mandatory: true

  - name: targetDeliveryDate
    dataType: Date

  - name: notifyParty
    dataType: String
    toolTip: The company entity which should be notified of the arrival of the cargo
    ui: TextArea

  - name: isLcl
    dataType: Boolean
    mandatory: true
    default: false
    label: Shipment Type
    ui: BooleanViaButtons
    ui.trueLabel: "LCL"
    ui.falseLabel: "FCL"

  - name: incoterms
    dataType: Incoterms
    mandatory: true

  - name: wantsOriginService
    dataType: Boolean
    default: true

  - name: wantsExportCustomsService
    dataType: Boolean
    default: false

  - name: cargoReadyDate
    dataType: Date
    mandatory: true

  - name: descriptionOfProducts
    dataType: String
    ui: TextArea
    applicableWhen: transportationMode == 'truck'
    toolTip: Please enter a short and concise description of products in this shipment

  - name: specialInstructions
    dataType: String
    ui: TextArea
    placeholderText: Enter any special instructions, such as handling information

derivedAttributes:
  - name: isShipperBooking
    dataType: Boolean
    function: =shipper == $user.company

  - name: isConsigneeBooking
    dataType: Boolean
    function: =consignee == $user.company

  - name: requiresChineseProductDescription
    dataType: Boolean
    function: =isShipperBooking && company.countryCode == 'CN'


enums:
  - name: BookingState
    values:
      - value: draft
        label: Draft
        icon: draft
      - value: waitingForPricing
        label: Waiting For Pricing
        icon: dollar_sign
      - value: awaitingReview
        label: Awaiting Your Review
        icon: ticket

associations:
  - name: shipper
      dataType: Company
      mandatory: true
  - name: consignee
      dataType: Company
      mandatory: true
  - originLocation
      dataType: Location
      mandatory: true
  - name: originPort
      dataType: Port
  - name: destinationLocation
      dataType: Location
  - name: destinationPort
      dataType: Port
  - name: cargo
      dataType: Cargo
      ownedByThisEntity: true
      mandatory: true
  - name: bookingHsCodes
      dataType: BookingHsCode
      ownedByThisEntity: true
      many: true
      mandatory: true
      applicableWhen: transportationMode != 'truck'
  - name: metadata
      dataType: MetadataValue
      ownedByThisEntity: true
      many: true
      ui: MetadataEditor

      

    

      