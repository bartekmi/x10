name: ShipmentBase
description: Captures shared attributes and associations for <Shipment> and <QuoteRequest>
abstract: true

attributes:
  - name: name
    dataType: String
    mandatory: true

  - name: transportationMode
    dataType: TransportationMode
    mandatory: true

  - name: priority
    dataType: Priority
    mandatory: true
    default: normal

  - name: cargoReadyDate
    dataType: Date
    mandatory: true

derivedAttributes:
  - name: flexId
    dataType: String
    formula: 'Flex-#{id}'

associations:
  - name: shipper
    dataType: Company
  - name: consignee
    dataType: Company
  - name: cargo
    dataType: Cargo
    owns: true
  - name: supplier
    dataType: Company
    ui: AssociationEditor

  - name: users
    dataType: ShipmentUser
    many: true
    owns: true
  - name: metadata
    dataType: MetadataValue
    many: true
    owns: true
    ui: Metadata
  - name: tasks
    dataType: Task
    many: true
    owns: true
  - name: origin
    dataType: ShipmentLocation
    many: true
    owns: true
    datagen_quantity: 2..4

# TODO: Need a concept of a derived association, and more powerful
# data generation, perhaps using code.
#  - name: origin
#    dataType: ShipmentLocation
#    ui: AssociationEditor
#    owns: true
#  - name: finalDestination
#    dataType: ShipmentLocation
#    ui: AssociationEditor
#    owns: true

