name: Address
inheritsFrom: Base
description: A physical or mailing address
datagen_sources: (us_cities.csv AS city)
datagen_quantity: 0


attributes:
  - name: unitNumber
    dataType: String
    maxWidth: 120
    datagen_pattern: ~D~

  - name: theAddress
    dataType: String
    mandatory: true
    datagen_pattern: (~ND~ | ~NDD~ | ~NDDD~) (50% => (West | East | North | South) | 50% => ) <noun> (Street | Avenue | Road | Rd | Cres | Lane)
    datagen_capitalization: wordCaps

  - name: city
    dataType: String
    mandatory: true
    maxWidth: 400
    datagen_from_source: ( city => city )

  - name: stateOrProvince
    dataType: String
    mandatory: true
    maxWidth: 250
    datagen_from_source: ( city => state_name )

  - name: zip
    dataType: String
    label: Zip or Postal Code
    mandatory: true
    maxWidth: 150
    datagen_pattern: (70% => ~DDDDD~ | 30% => ~DDDDD-DDDD~)

derivedAttributes:
  - name: firstAddressLine
    dataType: String
# TODO
#    formula: '=isEmpty(unitNumber) ? address : address + "   Unit " + unitNumber'
    formula: '=theAddress + "   Unit " + unitNumber'
  - name: secondAddressLine
    dataType: String
    formula: =city + ', ' + stateOrProvince
  - name: thirdAddressLine
    dataType: String
    formula: =zip
      

associations:
  - name: country
    dataType: Country
    mandatory: true
    owns: false
